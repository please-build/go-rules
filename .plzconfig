[Please]
Version = >=17.0.0-beta.8

[build]
hashcheckers = sha256

[Plugin "go"]
GoTool = //third_party/go:toolchain|go
Stdlib = //third_party/go:std
PleaseGoTool = //tools/please_go:bootstrap
ImportPath = github.com/please-build/go-rules
CoverageRedesign = true

[Plugin "cc"]
Target = //plugins:cc

[Plugin "e2e"]
Target = //plugins:e2e
PleaseVersion = 16.26.1

[PluginDefinition]
Name = go

[PluginConfig "go_tool"]
DefaultValue = go
Inherit = true

[PluginConfig "stdlib"]
Optional = true
Help = Build target for the Go standard library
Inherit = true

[PluginConfig "require_licences"]
DefaultValue = false
Type = bool
Inherit = true

[PluginConfig "import_path"]
Optional = true

[PluginConfig "cc_tool"]
DefaultValue = cc
Inherit = true
Optional = true

[PluginConfig "cgo_enabled"]
Optional = true
Inherit = true

[PluginConfig "ar_tool"]
DefaultValue = ar
Inherit = true

[PluginConfig "please_go_tool"]
ConfigKey = PleaseGoTool
DefaultValue = //tools:please_go
Inherit = true

[PluginConfig "delve_tool"]
DefaultValue = dlv
Inherit = true

[PluginConfig "default_static"]
DefaultValue = false
Inherit = true
Type = bool

[PluginConfig "test_root_compat"]
DefaultValue = false
Type = bool

[PluginConfig "cpp_coverage"]
Type = bool
DefaultValue = false

[PluginConfig "c_flags"]
Inherit = true
Repeatable = true
Optional = true

[PluginConfig "ld_flags"]
Inherit = true
Repeatable = true
Optional = true

[PluginConfig "legacy_imports"]
Type = bool
DefaultValue = False

[PluginConfig "split_debug_info"]
Type = bool
Optional = true
Help = Split debug info for binaries into a separate, optional output.

[PluginConfig "strip_tool"]
DefaultValue = eu-strip
Inherit = true
Help = Tool to use to strip debug info. This is temporary and will be removed later!

[PluginConfig "feature_flags"]
Repeatable = true
Optional = true
Inherit = true
Help = Flags to enable in-development features, or toggle breaking changes

[PluginConfig "coverageredesign"]
Type = bool
DefaultValue = false
Help = Support Go 1.20's coverage redesign. Will break coverage on 1.19, required for 1.20.

[PluginConfig "buildmode"]
Optional = true
Help = The Go build mode to target (see `go help buildmode` for info)

[PluginConfig "race"]
Type = bool
DefaultValue = false
Optional = true
Help = Compile for the Go race detector

[Plugin "shell"]
Target = //plugins:shell
